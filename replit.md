# MCP Backend Project

## Overview
خادم ذكاء اصطناعي مبني باستخدام Node.js وExpress، مصمم ليعمل على نمط SHTTP ضمن نظام MCP، حيث يدعم الاتصال باستخدام POST مع Server-Sent Events (SSE) لتنفيذ أدوات ذكية مثل التحويل، التحليل، أو المساعدات البرمجية.

الخادم جاهز لاستقبال أوامر MCP وتوجيهها لأدوات مخصصة عبر نقاط نهاية آمنة.

## Project Structure
```
/backend/
├── index.js                    # نقطة دخول التطبيق وخادم Express
├── config.toml                 # إعداد MCP وربطه مع Replit
├── package.json                # معلومات الحزم والتبعيات
├── memory.json                 # قاعدة بيانات ذاكرة صغيرة (lowdb)
├── replit.md                   # خريطة المشروع والتوثيق
└── tools/                      # مجلد جميع أدوات الذكاء الاصطناعي (Agent Tools)
    ├── ideaGenerator.js        # أداة توليد الأفكار الأولية للمشروع
    ├── structureGenerator.js   # أداة توليد هيكل المشروع حسب الفكرة
    ├── toolPlanner.js          # أداة اقتراح الأدوات المناسبة للمشروع
    ├── uiBuilder.js            # أداة توليد تخطيط واجهة المستخدم (UI)
    ├── testWriter.js           # أداة توليد اختبارات تلقائية للكود
    ├── dependency_adder.js     # أداة إدارة وتثبيت التبعيات
    ├── memoryManager.js        # أداة استرجاع الذكريات والتحديثات السابقة
    └── resilienceAdvisor.js    # أداة تقوية المشروع ضد الأعطال والتكرار
```

## API Endpoints
- `POST /mcp/idea` - توليد الأفكار وتحليلها (ideaGenerator)
- `POST /mcp/structure` - توليد هيكل المشروع (structureGenerator)
- `POST /mcp/tools` - تخطيط الأدوات المناسبة (toolPlanner)
- `POST /mcp/dependency` - تثبيت وإدارة التبعيات (dependency_adder)
- `POST /mcp/ui` - بناء واجهة المستخدم (uiBuilder)
- `POST /mcp/tests` - كتابة الاختبارات (testWriter)
- `POST /mcp/memory/store` - تخزين البيانات في الذاكرة
- `POST /mcp/memory/fetch` - استرجاع البيانات من الذاكرة
- `GET /mcp/sse` - Server-Sent Events للتحديثات المباشرة

## User Preferences
- التواصل باللغة العربية مفضل
- تنفيذ backend فقط بدون واجهة مستخدم
- التركيز على التوافق مع MCP والوظائف الأساسية
- حذف أي ملفات غير ضرورية من المشروع

## Recent Changes
- ✅ إنشاء المشروع الكامل متوافق مع MCP
- ✅ إنشاء جميع الأدوات المتخصصة في مجلد tools/
- ✅ إعادة تسمية وتحديث جميع الأدوات (ideaGenerator, structureGenerator, toolPlanner, etc.)
- ✅ تنفيذ نظام الذاكرة بنجاح مع memoryManager.js
- ✅ إضافة آلية المرونة والإعادة عند الأخطاء مع resilienceAdvisor.js
- ✅ إضافة أداة toolPlanner لاقتراح الأدوات المناسبة للمشروع
- ✅ تحسين testWriter.js مع دعم Jest متقدم
- ✅ تحسين uiBuilder.js مع أنظمة تصميم متعددة
- ✅ تحديث جميع نقاط النهاية في index.js
- ✅ إصلاح جميع الأخطاء البرمجية واختبار الخادم
- ✅ تحديث config.toml بالرابط الصحيح للخادم
- ✅ إنشاء ملف README.md شامل مع التوثيق الكامل
- ✅ إنشاء ملف DEPLOYMENT.md مع دليل النشر والصيانة
- ✅ تنظيف المشروع من الملفات الغير ضرورية
- ✅ اختبار جميع نقاط النهاية والتأكد من عملها بنجاح
- ✅ إعادة هيكلة المشروع بنمط احترافي منظم
- ✅ إنشاء Controllers منفصلة لكل أداة
- ✅ إضافة نظام Middleware متقدم للأمان ومعالجة الأخطاء
- ✅ تطوير نظام SSE متطور مع heartbeat وbroadcast
- ✅ إضافة نظام تسجيل مركزي وإعدادات مرنة
- ✅ إنشاء .gitignore شامل وسكريبتات مساعدة
- ✅ الحفاظ على التوافق الكامل مع النظام السابق
- ✅ تنظيف شامل للملفات المكررة والغير ضرورية
- ✅ إنشاء ToolService مركزي لإدارة جميع الأدوات
- ✅ تبسيط Controllers وإزالة التكرارات البرمجية
- ✅ إضافة نقطة /health لمراقبة النظام والأداء
- ✅ تحديث README.md شامل ومفصل مع أمثلة عملية
- ✅ تحسين معمارية المشروع لتكون احترافية ومنظمة
- ✅ حل مشاكل استقرار الخادم وإضافة إعادة تشغيل تلقائي
- ✅ إنشاء واجهة ويب تفاعلية كاملة تعمل في المتصفح
- ✅ تبسيط middleware وإزالة القيود للوصول السهل
- ✅ اختبار شامل لجميع الأدوات والنقاط النهائية
- ✅ ضمان التوافق الكامل مع بروتوكول MCP

## Tech Stack
- Node.js مع Express.js
- نظام تخزين ملفات JSON للذاكرة
- آلية retry للمرونة عند الأخطاء
- CORS مفعل للطلبات المتقاطعة
- دعم Server-Sent Events (SSE)